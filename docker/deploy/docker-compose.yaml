version: "3"

services:
    canvasgrid:
        build: ../../
        image: sdeeze/canvasgrid:${buildno-latest}
        container_name: canvasgrid
        restart: always
        ports:
            - "80:80"
            - "443:443"
        environment: 
            - ASPNETCORE_URLS=https://+;http://+;
        volumes:
            - /home/ubuntu/canvasgrid/Images:/canvasgrid/wwwroot/Images
    db:
        image: "mcr.microsoft.com/mssql/server"
        environment:
            SA_PASSWORD: "PASSWORD_REPLACE"
            ACCEPT_EULA: "Y"
        ports:
            - "1433:1433"
        volumes:
            - mssql-server-linux-data:/mssql/data
            - mssqlsystem:/var/opt/mssql \
            - mssqluser:/var/opt/sqlserver \

volumes:
  mssql-server-linux-data:
  mssqlsystem:
  mssqluser:
